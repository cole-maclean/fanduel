(function(){var w=this;var k=w._;var D={};var C=Array.prototype,f=Object.prototype,r=Function.prototype;var G=C.push,o=C.slice,y=C.concat,d=f.toString,j=f.hasOwnProperty;var K=C.forEach,q=C.map,E=C.reduce,c=C.reduceRight,b=C.filter,B=C.every,p=C.some,n=C.indexOf,l=C.lastIndexOf,u=Array.isArray,e=Object.keys,F=r.bind;var L=function(M){if(M instanceof L){return M}if(!(this instanceof L)){return new L(M)}this._wrapped=M};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=L}exports._=L}else{w._=L}L.VERSION="1.4.4";var H=L.each=L.forEach=function(R,Q,P){if(R==null){return}if(K&&R.forEach===K){R.forEach(Q,P)}else{if(R.length===+R.length){for(var O=0,M=R.length;O<M;O++){if(Q.call(P,R[O],O,R)===D){return}}}else{for(var N in R){if(L.has(R,N)){if(Q.call(P,R[N],N,R)===D){return}}}}}};L.map=L.collect=function(P,O,N){var M=[];if(P==null){return M}if(q&&P.map===q){return P.map(O,N)}H(P,function(S,Q,R){M[M.length]=O.call(N,S,Q,R)});return M};var g="Reduce of empty array with no initial value";L.reduce=L.foldl=L.inject=function(Q,P,M,O){var N=arguments.length>2;if(Q==null){Q=[]}if(E&&Q.reduce===E){if(O){P=L.bind(P,O)}return N?Q.reduce(P,M):Q.reduce(P)}H(Q,function(T,R,S){if(!N){M=T;N=true}else{M=P.call(O,M,T,R,S)}});if(!N){throw new TypeError(g)}return M};L.reduceRight=L.foldr=function(S,P,M,O){var N=arguments.length>2;if(S==null){S=[]}if(c&&S.reduceRight===c){if(O){P=L.bind(P,O)}return N?S.reduceRight(P,M):S.reduceRight(P)}var R=S.length;if(R!==+R){var Q=L.keys(S);R=Q.length}H(S,function(V,T,U){T=Q?Q[--R]:--R;if(!N){M=S[T];N=true}else{M=P.call(O,M,S[T],T,U)}});if(!N){throw new TypeError(g)}return M};L.find=L.detect=function(P,O,N){var M;A(P,function(S,Q,R){if(O.call(N,S,Q,R)){M=S;return true}});return M};L.filter=L.select=function(P,O,N){var M=[];if(P==null){return M}if(b&&P.filter===b){return P.filter(O,N)}H(P,function(S,Q,R){if(O.call(N,S,Q,R)){M[M.length]=S}});return M};L.reject=function(O,N,M){return L.filter(O,function(R,P,Q){return !N.call(M,R,P,Q)},M)};L.every=L.all=function(P,O,N){O||(O=L.identity);var M=true;if(P==null){return M}if(B&&P.every===B){return P.every(O,N)}H(P,function(S,Q,R){if(!(M=M&&O.call(N,S,Q,R))){return D}});return !!M};var A=L.some=L.any=function(P,O,N){O||(O=L.identity);var M=false;if(P==null){return M}if(p&&P.some===p){return P.some(O,N)}H(P,function(S,Q,R){if(M||(M=O.call(N,S,Q,R))){return D}});return !!M};L.contains=L.include=function(N,M){if(N==null){return false}if(n&&N.indexOf===n){return N.indexOf(M)!=-1}return A(N,function(O){return O===M})};L.invoke=function(O,P){var M=o.call(arguments,2);var N=L.isFunction(P);return L.map(O,function(Q){return(N?P:Q[P]).apply(Q,M)})};L.pluck=function(N,M){return L.map(N,function(O){return O[M]})};L.where=function(N,M,O){if(L.isEmpty(M)){return O?null:[]}return L[O?"find":"filter"](N,function(Q){for(var P in M){if(M[P]!==Q[P]){return false}}return true})};L.findWhere=function(N,M){return L.where(N,M,true)};L.max=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.max.apply(Math,P)}if(!O&&L.isEmpty(P)){return -Infinity}var M={computed:-Infinity,value:-Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R>=M.computed&&(M={value:T,computed:R})});return M.value};L.min=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.min.apply(Math,P)}if(!O&&L.isEmpty(P)){return Infinity}var M={computed:Infinity,value:Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R<M.computed&&(M={value:T,computed:R})});return M.value};L.shuffle=function(P){var O;var N=0;var M=[];H(P,function(Q){O=L.random(N++);M[N-1]=M[O];M[O]=Q});return M};var a=function(M){return L.isFunction(M)?M:function(N){return N[M]}};L.sortBy=function(P,O,M){var N=a(O);return L.pluck(L.map(P,function(S,Q,R){return{value:S,index:Q,criteria:N.call(M,S,Q,R)}}).sort(function(T,S){var R=T.criteria;var Q=S.criteria;if(R!==Q){if(R>Q||R===void 0){return 1}if(R<Q||Q===void 0){return -1}}return T.index<S.index?-1:1}),"value")};var t=function(R,Q,N,P){var M={};var O=a(Q||L.identity);H(R,function(U,S){var T=O.call(N,U,S,R);P(M,T,U)});return M};L.groupBy=function(O,N,M){return t(O,N,M,function(P,Q,R){(L.has(P,Q)?P[Q]:(P[Q]=[])).push(R)})};L.countBy=function(O,N,M){return t(O,N,M,function(P,Q){if(!L.has(P,Q)){P[Q]=0}P[Q]++})};L.sortedIndex=function(T,S,P,O){P=P==null?L.identity:a(P);var R=P.call(O,S);var M=0,Q=T.length;while(M<Q){var N=(M+Q)>>>1;P.call(O,T[N])<R?M=N+1:Q=N}return M};L.toArray=function(M){if(!M){return[]}if(L.isArray(M)){return o.call(M)}if(M.length===+M.length){return L.map(M,L.identity)}return L.values(M)};L.size=function(M){if(M==null){return 0}return(M.length===+M.length)?M.length:L.keys(M).length};L.first=L.head=L.take=function(O,N,M){if(O==null){return void 0}return(N!=null)&&!M?o.call(O,0,N):O[0]};L.initial=function(O,N,M){return o.call(O,0,O.length-((N==null)||M?1:N))};L.last=function(O,N,M){if(O==null){return void 0}if((N!=null)&&!M){return o.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};L.rest=L.tail=L.drop=function(O,N,M){return o.call(O,(N==null)||M?1:N)};L.compact=function(M){return L.filter(M,L.identity)};var x=function(N,O,M){H(N,function(P){if(L.isArray(P)){O?G.apply(M,P):x(P,O,M)}else{M.push(P)}});return M};L.flatten=function(N,M){return x(N,M,[])};L.without=function(M){return L.difference(M,o.call(arguments,1))};L.uniq=L.unique=function(S,R,Q,P){if(L.isFunction(R)){P=Q;Q=R;R=false}var N=Q?L.map(S,Q,P):S;var O=[];var M=[];H(N,function(U,T){if(R?(!T||M[M.length-1]!==U):!L.contains(M,U)){M.push(U);O.push(S[T])}});return O};L.union=function(){return L.uniq(y.apply(C,arguments))};L.intersection=function(N){var M=o.call(arguments,1);return L.filter(L.uniq(N),function(O){return L.every(M,function(P){return L.indexOf(P,O)>=0})})};L.difference=function(N){var M=y.apply(C,o.call(arguments,1));return L.filter(N,function(O){return !L.contains(M,O)})};L.zip=function(){var M=o.call(arguments);var P=L.max(L.pluck(M,"length"));var O=new Array(P);for(var N=0;N<P;N++){O[N]=L.pluck(M,""+N)}return O};L.object=function(Q,O){if(Q==null){return{}}var M={};for(var P=0,N=Q.length;P<N;P++){if(O){M[Q[P]]=O[P]}else{M[Q[P][0]]=Q[P][1]}}return M};L.indexOf=function(Q,O,P){if(Q==null){return -1}var N=0,M=Q.length;if(P){if(typeof P=="number"){N=(P<0?Math.max(0,M+P):P)}else{N=L.sortedIndex(Q,O);return Q[N]===O?N:-1}}if(n&&Q.indexOf===n){return Q.indexOf(O,P)}for(;N<M;N++){if(Q[N]===O){return N}}return -1};L.lastIndexOf=function(Q,O,P){if(Q==null){return -1}var M=P!=null;if(l&&Q.lastIndexOf===l){return M?Q.lastIndexOf(O,P):Q.lastIndexOf(O)}var N=(M?P:Q.length);while(N--){if(Q[N]===O){return N}}return -1};L.range=function(R,P,Q){if(arguments.length<=1){P=R||0;R=0}Q=arguments[2]||1;var N=Math.max(Math.ceil((P-R)/Q),0);var M=0;var O=new Array(N);while(M<N){O[M++]=R;R+=Q}return O};L.bind=function(O,N){if(O.bind===F&&F){return F.apply(O,o.call(arguments,1))}var M=o.call(arguments,2);return function(){return O.apply(N,M.concat(o.call(arguments)))}};L.partial=function(N){var M=o.call(arguments,1);return function(){return N.apply(this,M.concat(o.call(arguments)))}};L.bindAll=function(N){var M=o.call(arguments,1);if(M.length===0){M=L.functions(N)}H(M,function(O){N[O]=L.bind(N[O],N)});return N};L.memoize=function(O,N){var M={};N||(N=L.identity);return function(){var P=N.apply(this,arguments);return L.has(M,P)?M[P]:(M[P]=O.apply(this,arguments))}};L.delay=function(N,O){var M=o.call(arguments,2);return setTimeout(function(){return N.apply(null,M)},O)};L.defer=function(M){return L.delay.apply(L,[M,1].concat(o.call(arguments,1)))};L.throttle=function(R,T){var P,O,S,M;var Q=0;var N=function(){Q=new Date;S=null;M=R.apply(P,O)};return function(){var U=new Date;var V=T-(U-Q);P=this;O=arguments;if(V<=0){clearTimeout(S);S=null;Q=U;M=R.apply(P,O)}else{if(!S){S=setTimeout(N,V)}}return M}};L.debounce=function(O,Q,N){var P,M;return function(){var U=this,T=arguments;var S=function(){P=null;if(!N){M=O.apply(U,T)}};var R=N&&!P;clearTimeout(P);P=setTimeout(S,Q);if(R){M=O.apply(U,T)}return M}};L.once=function(O){var M=false,N;return function(){if(M){return N}M=true;N=O.apply(this,arguments);O=null;return N}};L.wrap=function(M,N){return function(){var O=[M];G.apply(O,arguments);return N.apply(this,O)}};L.compose=function(){var M=arguments;return function(){var N=arguments;for(var O=M.length-1;O>=0;O--){N=[M[O].apply(this,N)]}return N[0]}};L.after=function(N,M){if(N<=0){return M()}return function(){if(--N<1){return M.apply(this,arguments)}}};L.keys=e||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var M in O){if(L.has(O,M)){N[N.length]=M}}return N};L.values=function(O){var M=[];for(var N in O){if(L.has(O,N)){M.push(O[N])}}return M};L.pairs=function(O){var N=[];for(var M in O){if(L.has(O,M)){N.push([M,O[M]])}}return N};L.invert=function(O){var M={};for(var N in O){if(L.has(O,N)){M[O[N]]=N}}return M};L.functions=L.methods=function(O){var N=[];for(var M in O){if(L.isFunction(O[M])){N.push(M)}}return N.sort()};L.extend=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){M[O]=N[O]}}});return M};L.pick=function(N){var O={};var M=y.apply(C,o.call(arguments,1));H(M,function(P){if(P in N){O[P]=N[P]}});return O};L.omit=function(O){var P={};var N=y.apply(C,o.call(arguments,1));for(var M in O){if(!L.contains(N,M)){P[M]=O[M]}}return P};L.defaults=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){if(M[O]==null){M[O]=N[O]}}}});return M};L.clone=function(M){if(!L.isObject(M)){return M}return L.isArray(M)?M.slice():L.extend({},M)};L.tap=function(N,M){M(N);return N};var I=function(T,S,N,O){if(T===S){return T!==0||1/T==1/S}if(T==null||S==null){return T===S}if(T instanceof L){T=T._wrapped}if(S instanceof L){S=S._wrapped}var Q=d.call(T);if(Q!=d.call(S)){return false}switch(Q){case"[object String]":return T==String(S);case"[object Number]":return T!=+T?S!=+S:(T==0?1/T==1/S:T==+S);case"[object Date]":case"[object Boolean]":return +T==+S;case"[object RegExp]":return T.source==S.source&&T.global==S.global&&T.multiline==S.multiline&&T.ignoreCase==S.ignoreCase}if(typeof T!="object"||typeof S!="object"){return false}var M=N.length;while(M--){if(N[M]==T){return O[M]==S}}N.push(T);O.push(S);var V=0,W=true;if(Q=="[object Array]"){V=T.length;W=V==S.length;if(W){while(V--){if(!(W=I(T[V],S[V],N,O))){break}}}}else{var R=T.constructor,P=S.constructor;if(R!==P&&!(L.isFunction(R)&&(R instanceof R)&&L.isFunction(P)&&(P instanceof P))){return false}for(var U in T){if(L.has(T,U)){V++;if(!(W=L.has(S,U)&&I(T[U],S[U],N,O))){break}}}if(W){for(U in S){if(L.has(S,U)&&!(V--)){break}}W=!V}}N.pop();O.pop();return W};L.isEqual=function(N,M){return I(N,M,[],[])};L.isEmpty=function(N){if(N==null){return true}if(L.isArray(N)||L.isString(N)){return N.length===0}for(var M in N){if(L.has(N,M)){return false}}return true};L.isElement=function(M){return !!(M&&M.nodeType===1)};L.isArray=u||function(M){return d.call(M)=="[object Array]"};L.isObject=function(M){return M===Object(M)};H(["Arguments","Function","String","Number","Date","RegExp"],function(M){L["is"+M]=function(N){return d.call(N)=="[object "+M+"]"}});if(!L.isArguments(arguments)){L.isArguments=function(M){return !!(M&&L.has(M,"callee"))}}if(typeof(/./)!=="function"){L.isFunction=function(M){return typeof M==="function"}}L.isFinite=function(M){return isFinite(M)&&!isNaN(parseFloat(M))};L.isNaN=function(M){return L.isNumber(M)&&M!=+M};L.isBoolean=function(M){return M===true||M===false||d.call(M)=="[object Boolean]"};L.isNull=function(M){return M===null};L.isUndefined=function(M){return M===void 0};L.has=function(N,M){return j.call(N,M)};L.noConflict=function(){w._=k;return this};L.identity=function(M){return M};L.times=function(Q,P,O){var M=Array(Q);for(var N=0;N<Q;N++){M[N]=P.call(O,N)}return M};L.random=function(N,M){if(M==null){M=N;N=0}return N+Math.floor(Math.random()*(M-N+1))};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};m.unescape=L.invert(m.escape);var J={escape:new RegExp("["+L.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+L.keys(m.unescape).join("|")+")","g")};L.each(["escape","unescape"],function(M){L[M]=function(N){if(N==null){return""}return(""+N).replace(J[M],function(O){return m[M][O]})}});L.result=function(M,O){if(M==null){return null}var N=M[O];return L.isFunction(N)?N.call(M):N};L.mixin=function(M){H(L.functions(M),function(N){var O=L[N]=M[N];L.prototype[N]=function(){var P=[this._wrapped];G.apply(P,arguments);return s.call(this,O.apply(L,P))}})};var z=0;L.uniqueId=function(M){var N=++z+"";return M?M+N:N};L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\t|\u2028|\u2029/g;L.template=function(U,P,O){var N;O=L.defaults({},O,L.templateSettings);var Q=new RegExp([(O.escape||v).source,(O.interpolate||v).source,(O.evaluate||v).source].join("|")+"|$","g");var R=0;var M="__p+='";U.replace(Q,function(W,X,V,Z,Y){M+=U.slice(R,Y).replace(i,function(aa){return"\\"+h[aa]});if(X){M+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(V){M+="'+\n((__t=("+V+"))==null?'':__t)+\n'"}if(Z){M+="';\n"+Z+"\n__p+='"}R=Y+W.length;return W});M+="';\n";if(!O.variable){M="with(obj||{}){\n"+M+"}\n"}M="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+M+"return __p;\n";try{N=new Function(O.variable||"obj","_",M)}catch(S){S.source=M;throw S}if(P){return N(P,L)}var T=function(V){return N.call(this,V,L)};T.source="function("+(O.variable||"obj")+"){\n"+M+"}";return T};L.chain=function(M){return L(M).chain()};var s=function(M){return this._chain?L(M).chain():M};L.mixin(L);H(["pop","push","reverse","shift","sort","splice","unshift"],function(M){var N=C[M];L.prototype[M]=function(){var O=this._wrapped;N.apply(O,arguments);if((M=="shift"||M=="splice")&&O.length===0){delete O[0]}return s.call(this,O)}});H(["concat","join","slice"],function(M){var N=C[M];L.prototype[M]=function(){return s.call(this,N.apply(this._wrapped,arguments))}});L.extend(L.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(L){var u=this;var B=u.Backbone;var g=[];var D=g.push;var n=g.slice;var t=g.splice;var z;if(typeof exports!=="undefined"){z=exports}else{z=u.Backbone={}}z.VERSION="1.0.0";if(!L&&(typeof require!=="undefined")){L=require("underscore")}z.$=u.jQuery||u.Zepto||u.ender||u.$;z.noConflict=function(){u.Backbone=B;return this};z.emulateHTTP=false;z.emulateJSON=false;var J=z.Events={on:function(M,P,O){if(!x(this,"on",M,[P,O])||!P){return this}this._events||(this._events={});var N=this._events[M]||(this._events[M]=[]);N.push({callback:P,context:O,ctx:O||this});return this},once:function(N,Q,O){if(!x(this,"once",N,[Q,O])||!Q){return this}var M=this;var P=L.once(function(){M.off(N,P);Q.apply(this,arguments)});P._callback=Q;return this.on(N,P,O)},off:function(M,V,N){var T,U,W,S,R,O,Q,P;if(!this._events||!x(this,"off",M,[V,N])){return this}if(!M&&!V&&!N){this._events={};return this}S=M?[M]:L.keys(this._events);for(R=0,O=S.length;R<O;R++){M=S[R];if(W=this._events[M]){this._events[M]=T=[];if(V||N){for(Q=0,P=W.length;Q<P;Q++){U=W[Q];if((V&&V!==U.callback&&V!==U.callback._callback)||(N&&N!==U.context)){T.push(U)}}}if(!T.length){delete this._events[M]}}}return this},trigger:function(O){if(!this._events){return this}var N=n.call(arguments,1);if(!x(this,"trigger",O,N)){return this}var P=this._events[O];var M=this._events.all;if(P){b(P,N)}if(M){b(M,arguments)}return this},stopListening:function(P,M,R){var N=this._listeners;if(!N){return this}var O=!M&&!R;if(typeof M==="object"){R=this}if(P){(N={})[P._listenerId]=P}for(var Q in N){N[Q].off(M,R,this);if(O){delete this._listeners[Q]}}return this}};var w=/\s+/;var x=function(T,R,N,Q){if(!N){return true}if(typeof N==="object"){for(var P in N){T[R].apply(T,[P,N[P]].concat(Q))}return false}if(w.test(N)){var S=N.split(w);for(var O=0,M=S.length;O<M;O++){T[R].apply(T,[S[O]].concat(Q))}return false}return true};var b=function(R,P){var S,Q=-1,O=R.length,N=P[0],M=P[1],T=P[2];switch(P.length){case 0:while(++Q<O){(S=R[Q]).callback.call(S.ctx)}return;case 1:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N)}return;case 2:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M)}return;case 3:while(++Q<O){(S=R[Q]).callback.call(S.ctx,N,M,T)}return;default:while(++Q<O){(S=R[Q]).callback.apply(S.ctx,P)}}};var C={listenTo:"on",listenToOnce:"once"};L.each(C,function(M,N){J[N]=function(Q,O,S){var P=this._listeners||(this._listeners={});var R=Q._listenerId||(Q._listenerId=L.uniqueId("l"));P[R]=Q;if(typeof O==="object"){S=this}Q[M](O,S,this);return this}});J.bind=J.on;J.unbind=J.off;L.extend(z,J);var E=z.Model=function(M,O){var P;var N=M||{};O||(O={});this.cid=L.uniqueId("c");this.attributes={};L.extend(this,L.pick(O,F));if(O.parse){N=this.parse(N,O)||{}}if(P=L.result(this,"defaults")){N=L.defaults({},N,P)}this.set(N,O);this.changed={};this.initialize.apply(this,arguments)};var F=["url","urlRoot","collection"];L.extend(E.prototype,J,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(M){return L.clone(this.attributes)},sync:function(){return z.sync.apply(this,arguments)},get:function(M){return this.attributes[M]},escape:function(M){return L.escape(this.get(M))},has:function(M){return this.get(M)!=null},set:function(U,M,Y){var S,V,W,T,R,X,O,Q;if(U==null){return this}if(typeof U==="object"){V=U;Y=M}else{(V={})[U]=M}Y||(Y={});if(!this._validate(V,Y)){return false}W=Y.unset;R=Y.silent;T=[];X=this._changing;this._changing=true;if(!X){this._previousAttributes=L.clone(this.attributes);this.changed={}}Q=this.attributes,O=this._previousAttributes;if(this.idAttribute in V){this.id=V[this.idAttribute]}for(S in V){M=V[S];if(!L.isEqual(Q[S],M)){T.push(S)}if(!L.isEqual(O[S],M)){this.changed[S]=M}else{delete this.changed[S]}W?delete Q[S]:Q[S]=M}if(!R){if(T.length){this._pending=true}for(var P=0,N=T.length;P<N;P++){this.trigger("change:"+T[P],this,Q[T[P]],Y)}}if(X){return this}if(!R){while(this._pending){this._pending=false;this.trigger("change",this,Y)}}this._pending=false;this._changing=false;return this},unset:function(M,N){return this.set(M,void 0,L.extend({},N,{unset:true}))},clear:function(N){var M={};for(var O in this.attributes){M[O]=void 0}return this.set(M,L.extend({},N,{unset:true}))},hasChanged:function(M){if(M==null){return !L.isEmpty(this.changed)}return L.has(this.changed,M)},changedAttributes:function(O){if(!O){return this.hasChanged()?L.clone(this.changed):false}var Q,P=false;var N=this._changing?this._previousAttributes:this.attributes;for(var M in O){if(L.isEqual(N[M],(Q=O[M]))){continue}(P||(P={}))[M]=Q}return P},previous:function(M){if(M==null||!this._previousAttributes){return null}return this._previousAttributes[M]},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(N){N=N?L.clone(N):{};if(N.parse===void 0){N.parse=true}var M=this;var O=N.success;N.success=function(P){if(!M.set(M.parse(P,N),N)){return false}if(O){O(M,P,N)}M.trigger("sync",M,P,N)};H(this,N);return this.sync("read",this,N)},save:function(Q,N,U){var R,M,T,O=this.attributes;if(Q==null||typeof Q==="object"){R=Q;U=N}else{(R={})[Q]=N}if(R&&(!U||!U.wait)&&!this.set(R,U)){return false}U=L.extend({validate:true},U);if(!this._validate(R,U)){return false}if(R&&U.wait){this.attributes=L.extend({},O,R)}if(U.parse===void 0){U.parse=true}var P=this;var S=U.success;U.success=function(W){P.attributes=O;var V=P.parse(W,U);if(U.wait){V=L.extend(R||{},V)}if(L.isObject(V)&&!P.set(V,U)){return false}if(S){S(P,W,U)}P.trigger("sync",P,W,U)};H(this,U);M=this.isNew()?"create":(U.patch?"patch":"update");if(M==="patch"){U.attrs=R}T=this.sync(M,this,U);if(R&&U.wait){this.attributes=O}return T},destroy:function(N){N=N?L.clone(N):{};var M=this;var Q=N.success;var O=function(){M.trigger("destroy",M,M.collection,N)};N.success=function(R){if(N.wait||M.isNew()){O()}if(Q){Q(M,R,N)}if(!M.isNew()){M.trigger("sync",M,R,N)}};if(this.isNew()){N.success();return false}H(this,N);var P=this.sync("delete",this,N);if(!N.wait){O()}return P},url:function(){var M=L.result(this,"urlRoot")||L.result(this.collection,"url")||r();if(this.isNew()){return M}return M+(M.charAt(M.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(N,M){return N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(M){return this._validate({},L.extend(M||{},{validate:true}))},_validate:function(O,N){if(!N.validate||!this.validate){return true}O=L.extend({},this.attributes,O);var M=this.validationError=this.validate(O,N)||null;if(!M){return true}this.trigger("invalid",this,M,L.extend(N||{},{validationError:M}));return false}});var a=["keys","values","pairs","invert","pick","omit"];L.each(a,function(M){E.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.attributes);return L[M].apply(L,N)}});var c=z.Collection=function(N,M){M||(M={});if(M.url){this.url=M.url}if(M.model){this.model=M.model}if(M.comparator!==void 0){this.comparator=M.comparator}this._reset();this.initialize.apply(this,arguments);if(N){this.reset(N,L.extend({silent:true},M))}};var o={add:true,remove:true,merge:true};var K={add:true,merge:false,remove:false};L.extend(c.prototype,J,{model:E,initialize:function(){},toJSON:function(M){return this.map(function(N){return N.toJSON(M)})},sync:function(){return z.sync.apply(this,arguments)},add:function(N,M){return this.set(N,L.defaults(M||{},K))},remove:function(R,P){R=L.isArray(R)?R.slice():[R];P||(P={});var Q,M,O,N;for(Q=0,M=R.length;Q<M;Q++){N=this.get(R[Q]);if(!N){continue}delete this._byId[N.id];delete this._byId[N.cid];O=this.indexOf(N);this.models.splice(O,1);this.length--;if(!P.silent){P.index=O;N.trigger("remove",N,this,P)}this._removeReference(N)}return this},set:function(N,Z){Z=L.defaults(Z||{},o);if(Z.parse){N=this.parse(N,Z)}if(!L.isArray(N)){N=N?[N]:[]}var U,Q,W,X,O,V;var P=Z.at;var T=this.comparator&&(P==null)&&Z.sort!==false;var R=L.isString(this.comparator)?this.comparator:null;var Y=[],M=[],S={};for(U=0,Q=N.length;U<Q;U++){if(!(W=this._prepareModel(N[U],Z))){continue}if(O=this.get(W)){if(Z.remove){S[O.cid]=true}if(Z.merge){O.set(W.attributes,Z);if(T&&!V&&O.hasChanged(R)){V=true}}}else{if(Z.add){Y.push(W);W.on("all",this._onModelEvent,this);this._byId[W.cid]=W;if(W.id!=null){this._byId[W.id]=W}}}}if(Z.remove){for(U=0,Q=this.length;U<Q;++U){if(!S[(W=this.models[U]).cid]){M.push(W)}}if(M.length){this.remove(M,Z)}}if(Y.length){if(T){V=true}this.length+=Y.length;if(P!=null){t.apply(this.models,[P,0].concat(Y))}else{D.apply(this.models,Y)}}if(V){this.sort({silent:true})}if(Z.silent){return this}for(U=0,Q=Y.length;U<Q;U++){(W=Y[U]).trigger("add",W,this,Z)}if(V){this.trigger("sort",this,Z)}return this},reset:function(P,N){N||(N={});for(var O=0,M=this.models.length;O<M;O++){this._removeReference(this.models[O])}N.previousModels=this.models;this._reset();this.add(P,L.extend({silent:true},N));if(!N.silent){this.trigger("reset",this,N)}return this},push:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:this.length},M));return N},pop:function(N){var M=this.at(this.length-1);this.remove(M,N);return M},unshift:function(N,M){N=this._prepareModel(N,M);this.add(N,L.extend({at:0},M));return N},shift:function(N){var M=this.at(0);this.remove(M,N);return M},slice:function(N,M){return this.models.slice(N,M)},get:function(M){if(M==null){return void 0}return this._byId[M.id!=null?M.id:M.cid||M]},at:function(M){return this.models[M]},where:function(M,N){if(L.isEmpty(M)){return N?void 0:[]}return this[N?"find":"filter"](function(O){for(var P in M){if(M[P]!==O.get(P)){return false}}return true})},findWhere:function(M){return this.where(M,true)},sort:function(M){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}M||(M={});if(L.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(L.bind(this.comparator,this))}if(!M.silent){this.trigger("sort",this,M)}return this},sortedIndex:function(M,P,N){P||(P=this.comparator);var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L.sortedIndex(this.models,M,O,N)},pluck:function(M){return L.invoke(this.models,"get",M)},fetch:function(M){M=M?L.clone(M):{};if(M.parse===void 0){M.parse=true}var O=M.success;var N=this;M.success=function(P){var Q=M.reset?"reset":"set";N[Q](P,M);if(O){O(N,P,M)}N.trigger("sync",N,P,M)};H(this,M);return this.sync("read",this,M)},create:function(N,M){M=M?L.clone(M):{};if(!(N=this._prepareModel(N,M))){return false}if(!M.wait){this.add(N,M)}var P=this;var O=M.success;M.success=function(Q){if(M.wait){P.add(N,M)}if(O){O(N,Q,M)}};N.save(null,M);return N},parse:function(N,M){return N},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(O,N){if(O instanceof E){if(!O.collection){O.collection=this}return O}N||(N={});N.collection=this;var M=new this.model(O,N);if(!M._validate(O,N)){this.trigger("invalid",this,O,N);return false}return M},_removeReference:function(M){if(this===M.collection){delete M.collection}M.off("all",this._onModelEvent,this)},_onModelEvent:function(O,N,P,M){if((O==="add"||O==="remove")&&P!==this){return}if(O==="destroy"){this.remove(N,M)}if(N&&O==="change:"+N.idAttribute){delete this._byId[N.previous(N.idAttribute)];if(N.id!=null){this._byId[N.id]=N}}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];L.each(y,function(M){c.prototype[M]=function(){var N=n.call(arguments);N.unshift(this.models);return L[M].apply(L,N)}});var k=["groupBy","countBy","sortBy"];L.each(k,function(M){c.prototype[M]=function(P,N){var O=L.isFunction(P)?P:function(Q){return Q.get(P)};return L[M](this.models,O,N)}});var G=z.View=function(M){this.cid=L.uniqueId("view");this._configure(M||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/;var e=["model","collection","el","id","attributes","className","tagName","events"];L.extend(G.prototype,J,{tagName:"div",$:function(M){return this.$el.find(M)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(M,N){if(this.$el){this.undelegateEvents()}this.$el=M instanceof z.$?M:z.$(M);this.el=this.$el[0];if(N!==false){this.delegateEvents()}return this},delegateEvents:function(Q){if(!(Q||(Q=L.result(this,"events")))){return this}this.undelegateEvents();for(var P in Q){var R=Q[P];if(!L.isFunction(R)){R=this[Q[P]]}if(!R){continue}var O=P.match(v);var N=O[1],M=O[2];R=L.bind(R,this);N+=".delegateEvents"+this.cid;if(M===""){this.$el.on(N,R)}else{this.$el.on(N,M,R)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(M){if(this.options){M=L.extend({},L.result(this,"options"),M)}L.extend(this,L.pick(M,e));this.options=M},_ensureElement:function(){if(!this.el){var M=L.extend({},L.result(this,"attributes"));if(this.id){M.id=L.result(this,"id")}if(this.className){M["class"]=L.result(this,"className")}var N=z.$("<"+L.result(this,"tagName")+">").attr(M);this.setElement(N,false)}else{this.setElement(L.result(this,"el"),false)}}});z.sync=function(S,N,M){var P=j[S];L.defaults(M||(M={}),{emulateHTTP:z.emulateHTTP,emulateJSON:z.emulateJSON});var R={type:P,dataType:"json"};if(!M.url){R.url=L.result(N,"url")||r()}if(M.data==null&&N&&(S==="create"||S==="update"||S==="patch")){R.contentType="application/json";R.data=JSON.stringify(M.attrs||N.toJSON(M))}if(M.emulateJSON){R.contentType="application/x-www-form-urlencoded";R.data=R.data?{model:R.data}:{}}if(M.emulateHTTP&&(P==="PUT"||P==="DELETE"||P==="PATCH")){R.type="POST";if(M.emulateJSON){R.data._method=P}var O=M.beforeSend;M.beforeSend=function(T){T.setRequestHeader("X-HTTP-Method-Override",P);if(O){return O.apply(this,arguments)}}}if(R.type!=="GET"&&!M.emulateJSON){R.processData=false}if(R.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){R.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var Q=M.xhr=z.ajax(L.extend(R,M));N.trigger("request",N,Q,M);return Q};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};z.ajax=function(){return z.$.ajax.apply(z.$,arguments)};var p=z.Router=function(M){M||(M={});if(M.routes){this.routes=M.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var q=/\((.*?)\)/g;var s=/(\(\?)?:\w+/g;var d=/\*\w+/g;var h=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(p.prototype,J,{initialize:function(){},route:function(N,O,P){if(!L.isRegExp(N)){N=this._routeToRegExp(N)}if(L.isFunction(O)){P=O;O=""}if(!P){P=this[O]}var M=this;z.history.route(N,function(R){var Q=M._extractParameters(N,R);P&&P.apply(M,Q);M.trigger.apply(M,["route:"+O].concat(Q));M.trigger("route",O,Q);z.history.trigger("route",M,O,Q)});return this},navigate:function(N,M){z.history.navigate(N,M);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=L.result(this,"routes");var N,M=L.keys(this.routes);while((N=M.pop())!=null){this.route(N,this.routes[N])}},_routeToRegExp:function(M){M=M.replace(h,"\\$&").replace(q,"(?:$1)?").replace(s,function(O,N){return N?O:"([^/]+)"}).replace(d,"(.*?)");return new RegExp("^"+M+"$")},_extractParameters:function(M,N){var O=M.exec(N).slice(1);return L.map(O,function(P){return P?decodeURIComponent(P):null})}});var i=z.History=function(){this.handlers=[];L.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var A=/^[#\/]|\s+$/g;var f=/^\/+|\/+$/g;var I=/msie [\w.]+/;var m=/\/$/;i.started=false;L.extend(i.prototype,J,{interval:50,getHash:function(N){var M=(N||this).location.href.match(/#(.*)$/);return M?M[1]:""},getFragment:function(O,N){if(O==null){if(this._hasPushState||!this._wantsHashChange||N){O=this.location.pathname;var M=this.root.replace(m,"");if(!O.indexOf(M)){O=O.substr(M.length)}}else{O=this.getHash()}}return O.replace(A,"")},start:function(O){if(i.started){throw new Error("Backbone.history has already been started")}i.started=true;this.options=L.extend({},{root:"/"},this.options,O);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var N=this.getFragment();var M=document.documentMode;var Q=(I.exec(navigator.userAgent.toLowerCase())&&(!M||M<=7));this.root=("/"+this.root+"/").replace(f,"/");if(Q&&this._wantsHashChange){this.iframe=z.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(N)}if(this._hasPushState){z.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!Q){z.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=N;var R=this.location;var P=R.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!P){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&P&&R.hash){this.fragment=this.getHash().replace(A,"");this.history.replaceState({},document.title,this.root+this.fragment+R.search)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){z.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);i.started=false},route:function(M,N){this.handlers.unshift({route:M,callback:N})},checkUrl:function(N){var M=this.getFragment();if(M===this.fragment&&this.iframe){M=this.getFragment(this.getHash(this.iframe))}if(M===this.fragment){return false}if(this.iframe){this.navigate(M)}this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(O){var N=this.fragment=this.getFragment(O);var M=L.any(this.handlers,function(P){if(P.route.test(N)){P.callback(N);return true}});return M},navigate:function(O,N){if(!i.started){return false}if(!N||N===true){N={trigger:N}}O=this.getFragment(O||"");if(this.fragment===O){return}this.fragment=O;var M=this.root+O;if(this._hasPushState){this.history[N.replace?"replaceState":"pushState"]({},document.title,M)}else{if(this._wantsHashChange){this._updateHash(this.location,O,N.replace);if(this.iframe&&(O!==this.getFragment(this.getHash(this.iframe)))){if(!N.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,O,N.replace)}}else{return this.location.assign(M)}}if(N.trigger){this.loadUrl(O)}},_updateHash:function(M,O,P){if(P){var N=M.href.replace(/(javascript:|#).*$/,"");M.replace(N+"#"+O)}else{M.hash="#"+O}}});z.history=new i;var l=function(M,O){var N=this;var Q;if(M&&L.has(M,"constructor")){Q=M.constructor}else{Q=function(){return N.apply(this,arguments)}}L.extend(Q,N,O);var P=function(){this.constructor=Q};P.prototype=N.prototype;Q.prototype=new P;if(M){L.extend(Q.prototype,M)}Q.__super__=N.prototype;return Q};E.extend=c.extend=p.extend=G.extend=i.extend=l;var r=function(){throw new Error('A "url" property or function must be specified')};var H=function(O,N){var M=N.error;N.error=function(P){if(M){M(O,P,N)}O.trigger("error",O,P,N)}}}).call(this,_);
/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */
;Backbone.ChildViewContainer=(function(d,c){var a=function(e){this._views={};this._indexByModel={};this._indexByCollection={};this._indexByCustom={};this._updateLength();this._addInitialViews(e)};c.extend(a.prototype,{add:function(e,g){var f=e.cid;this._views[f]=e;if(e.model){this._indexByModel[e.model.cid]=f}if(e.collection){this._indexByCollection[e.collection.cid]=f}if(g){this._indexByCustom[g]=f}this._updateLength()},findByModel:function(f){var e=this._indexByModel[f.cid];return this.findByCid(e)},findByCollection:function(f){var e=this._indexByCollection[f.cid];return this.findByCid(e)},findByCustom:function(f){var e=this._indexByCustom[f];return this.findByCid(e)},findByIndex:function(e){return c.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var f=e.cid;if(e.model){delete this._indexByModel[e.model.cid]}if(e.collection){delete this._indexByCollection[e.collection.cid]}var h;for(var g in this._indexByCustom){if(this._indexByCustom.hasOwnProperty(g)){if(this._indexByCustom[g]===f){h=g;break}}}if(h){delete this._indexByCustom[h]}delete this._views[f];this._updateLength()},call:function(f,e){e=Array.prototype.slice.call(arguments,1);this.apply(f,e)},apply:function(g,f){var e;f=f||[];c.each(this._views,function(h,i){if(c.isFunction(h[g])){h[g].apply(h,f)}})},_updateLength:function(){this.length=c.size(this._views)},_addInitialViews:function(f){if(!f){return}var e,g,h=f.length;for(g=0;g<h;g++){e=f[g];this.add(e)}}});var b=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];c.each(b,function(e){a.prototype[e]=function(){var f=c.values(this._views);var g=[f].concat(c.toArray(arguments));return c[e].apply(c,g)}});return a})(Backbone,_);Backbone.Wreqr=(function(d,c,a){var b={};b.Handlers=(function(g,f){var e=function(){this._handlers={}};e.extend=g.Model.extend;f.extend(e.prototype,{addHandler:function(i,k,j){var h={callback:k,context:j};this._handlers[i]=h},getHandler:function(i){var h=this._handlers[i];if(!h){throw new Error("Handler not found for '"+i+"'")}return function(){var j=Array.prototype.slice.apply(arguments);return h.callback.apply(h.context,j)}},removeHandler:function(h){delete this._handlers[h]},removeAllHandlers:function(){this._handlers={}}});return e})(d,a);b.Commands=(function(e){return e.Handlers.extend({execute:function(){var g=arguments[0];var f=Array.prototype.slice.call(arguments,1);this.getHandler(g).apply(this,f)}})})(b);b.RequestResponse=(function(e){return e.Handlers.extend({request:function(){var g=arguments[0];var f=Array.prototype.slice.call(arguments,1);return this.getHandler(g).apply(this,f)}})})(b);b.EventAggregator=(function(g,e){var f=function(){};f.extend=g.Model.extend;e.extend(f.prototype,g.Events);return f})(d,a);return b})(Backbone,Backbone.Marionette,_);var Marionette=(function(e,a,b){var d={};e.Marionette=d;var c=Array.prototype.slice;d.extend=e.Model.extend;d.getOption=function(h,f){if(!h||!f){return}var g;if(h.options&&(f in h.options)&&(h.options[f]!==undefined)){g=h.options[f]}else{g=h[f]}return g};d.createObject=(function(){var f;function g(){}if(typeof Object.create==="function"){f=Object.create}else{f=function(h){g.prototype=h;var i=new g();g.prototype=null;return i}}return f})();d.triggerMethod=function(){var j=Array.prototype.slice.apply(arguments);var g=j[0];var h=g.split(":");var l,m,f="on";for(var k=0;k<h.length;k++){l=h[k];m=l.charAt(0).toUpperCase();f+=m+l.slice(1)}this.trigger.apply(this,j);if(a.isFunction(this[f])){j.shift();return this[f].apply(this,j)}};d.MonitorDOMRefresh=(function(){function h(i){i._isShown=true;f(i)}function g(i){i._isRendered=true;f(i)}function f(i){if(i._isShown&&i._isRendered){if(a.isFunction(i.triggerMethod)){i.triggerMethod("dom:refresh")}}}return function(i){i.listenTo(i,"show",function(){h(i)});i.listenTo(i,"render",function(){g(i)})}})();(function(k){function j(p,n,l,m){var o=m.split(/\s+/);a.each(o,function(q){var r=p[q];if(!r){throw new Error("Method '"+q+"' was configured as an event handler, but does not exist.")}p.listenTo(n,l,r,p)})}function f(n,m,l,o){n.listenTo(m,l,o,n)}function h(p,n,l,m){var o=m.split(/\s+/);a.each(o,function(q){var r=p[r];p.stopListening(n,l,r,p)})}function g(n,m,l,o){n.stopListening(m,l,o,n)}function i(o,l,p,n,m){if(!l||!p){return}if(a.isFunction(p)){p=p.call(o)}a.each(p,function(r,q){if(a.isFunction(r)){n(o,l,q,r)}else{m(o,l,q,r)}})}k.bindEntityEvents=function(m,l,n){i(m,l,n,f,j)};k.unbindEntityEvents=function(m,l,n){i(m,l,n,g,h)}})(d);d.Callbacks=function(){this._deferred=b.Deferred();this._callbacks=[]};a.extend(d.Callbacks.prototype,{add:function(g,f){this._callbacks.push({cb:g,ctx:f});this._deferred.done(function(i,h){if(f){i=f}g.call(i,h)})},run:function(f,g){this._deferred.resolve(g,f)},reset:function(){var g=this;var f=this._callbacks;this._deferred=b.Deferred();this._callbacks=[];a.each(f,function(h){g.add(h.cb,h.ctx)})}});d.Controller=function(f){this.triggerMethod=d.triggerMethod;this.options=f||{};if(a.isFunction(this.initialize)){this.initialize(this.options)}};d.Controller.extend=d.extend;a.extend(d.Controller.prototype,e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});d.Region=function(g){this.options=g||{};this.el=d.getOption(this,"el");if(!this.el){var h=new Error("An 'el' must be specified for a region.");h.name="NoElError";throw h}if(this.initialize){var f=Array.prototype.slice.apply(arguments);this.initialize.apply(this,f)}};a.extend(d.Region,{buildRegion:function(h,m){var l=(typeof h==="string");var k=(typeof h.selector==="string");var n=(typeof h.regionType==="undefined");var i=(typeof h==="function");if(!i&&!l&&!k){throw new Error("Region must be specified as a Region type, a selector string or an object with selector property")}var g,j;if(l){g=h}if(h.selector){g=h.selector}if(i){j=h}if(!i&&n){j=m}if(h.regionType){j=h.regionType}var f=new j({el:g});return f}});a.extend(d.Region.prototype,e.Events,{show:function(f){this.ensureEl();this.close();f.render();this.open(f);d.triggerMethod.call(f,"show");d.triggerMethod.call(this,"show",f);this.currentView=f},ensureEl:function(){if(!this.$el||this.$el.length===0){this.$el=this.getEl(this.el)}},getEl:function(f){return b(f)},open:function(f){this.$el.empty().append(f.el)},close:function(){var f=this.currentView;if(!f||f.isClosed){return}if(f.close){f.close()}d.triggerMethod.call(this,"close");delete this.currentView},attachView:function(f){this.currentView=f},reset:function(){this.close();delete this.$el}});d.Region.extend=d.extend;d.TemplateCache=function(f){this.templateId=f};a.extend(d.TemplateCache,{templateCaches:{},get:function(f){var h=this;var g=this.templateCaches[f];if(!g){g=new d.TemplateCache(f);this.templateCaches[f]=g}return g.load()},clear:function(){var g;var f=Array.prototype.slice.apply(arguments);var h=f.length;if(h>0){for(g=0;g<h;g++){delete this.templateCaches[f[g]]}}else{this.templateCaches={}}}});a.extend(d.TemplateCache.prototype,{load:function(){var g=this;if(this.compiledTemplate){return this.compiledTemplate}var f=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(f);return this.compiledTemplate},loadTemplate:function(f){var g=b(f).html();if(!g||g.length===0){var i="Could not find template: '"+f+"'";var h=new Error(i);h.name="NoTemplateError";throw h}return g},compileTemplate:function(f){return a.template(f)}});d.Renderer={render:function(h,i){var g=typeof h==="function"?h:d.TemplateCache.get(h);var f=g(i);return f}};d.View=e.View.extend({constructor:function(){a.bindAll(this,"render");var f=Array.prototype.slice.apply(arguments);e.View.prototype.constructor.apply(this,f);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:d.triggerMethod,getTemplate:function(){return d.getOption(this,"template")},mixinTemplateHelpers:function(f){f=f||{};var g=this.templateHelpers;if(a.isFunction(g)){g=g.call(this)}return a.extend(f,g)},configureTriggers:function(){if(!this.triggers){return}var g=this;var h={};var f=a.result(this,"triggers");a.each(f,function(j,i){h[i]=function(l){if(l&&l.preventDefault){l.preventDefault()}if(l&&l.stopPropagation){l.stopPropagation()}var k={view:this,model:this.model,collection:this.collection};g.triggerMethod(j,k)}});return h},delegateEvents:function(f){this._delegateDOMEvents(f);d.bindEntityEvents(this,this.model,d.getOption(this,"modelEvents"));d.bindEntityEvents(this,this.collection,d.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(f){f=f||this.events;if(a.isFunction(f)){f=f.call(this)}var h={};var g=this.configureTriggers();a.extend(h,f,g);e.View.prototype.delegateEvents.call(this,h)},undelegateEvents:function(){var f=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,f);d.unbindEntityEvents(this,this.model,d.getOption(this,"modelEvents"));d.unbindEntityEvents(this,this.collection,d.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed){return}var f=this.triggerMethod("before:close");if(f===false){return}this.isClosed=true;this.triggerMethod("close");this.remove()},bindUIElements:function(){if(!this.ui){return}var f=this;if(!this.uiBindings){this.uiBindings=a.result(this,"ui")}this.ui={};a.each(a.keys(this.uiBindings),function(h){var g=f.uiBindings[h];f.ui[h]=f.$(g)})}});d.ItemView=d.View.extend({constructor:function(){var f=Array.prototype.slice.apply(arguments);d.View.prototype.constructor.apply(this,f)},serializeData:function(){var f={};if(this.model){f=this.model.toJSON()}else{if(this.collection){f={items:this.collection.toJSON()}}}return f},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var h=this.serializeData();h=this.mixinTemplateHelpers(h);var g=this.getTemplate();var f=d.Renderer.render(g,h);this.$el.html(f);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){if(this.isClosed){return}this.triggerMethod("item:before:close");var f=Array.prototype.slice.apply(arguments);d.View.prototype.close.apply(this,f);this.triggerMethod("item:closed")}});d.CollectionView=d.View.extend({itemViewEventPrefix:"itemview",constructor:function(g){this._initChildViewStorage();var f=Array.prototype.slice.apply(arguments);d.View.prototype.constructor.apply(this,f);this._initialEvents()},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this.render,this)}},addChildView:function(i,j,g){this.closeEmptyView();var h=this.getItemView(i);var f=this.collection.indexOf(i);this.addItemView(i,h,f)},onShowCalled:function(){this.children.each(function(f){d.triggerMethod.call(f,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=false;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.closeEmptyView();this.closeChildren();if(this.collection&&this.collection.length>0){this.showCollection()}else{this.showEmptyView()}},showCollection:function(){var g=this;var f;this.collection.each(function(i,h){f=g.getItemView(i);g.addItemView(i,f,h)})},showEmptyView:function(){var g=d.getOption(this,"emptyView");if(g&&!this._showingEmptyView){this._showingEmptyView=true;var f=new e.Model();this.addItemView(f,g,0)}},closeEmptyView:function(){if(this._showingEmptyView){this.closeChildren();delete this._showingEmptyView}},getItemView:function(h){var f=d.getOption(this,"itemView");if(!f){var g=new Error("An `itemView` must be specified");g.name="NoItemViewError";throw g}return f},addItemView:function(j,i,g){var h=this;var k=d.getOption(this,"itemViewOptions");if(a.isFunction(k)){k=k.call(this,j)}var f=this.buildItemView(j,i,k);this.addChildViewEventForwarding(f);this.triggerMethod("before:item:added",f);this.children.add(f);this.renderItemView(f,g);if(this._isShown){d.triggerMethod.call(f,"show")}this.triggerMethod("after:item:added",f)},addChildViewEventForwarding:function(f){var g=d.getOption(this,"itemViewEventPrefix");this.listenTo(f,"all",function(){var h=c.call(arguments);h[0]=g+":"+h[0];h.splice(1,0,f);d.triggerMethod.apply(this,h)},this)},renderItemView:function(f,g){f.render();this.appendHtml(this,f,g)},buildItemView:function(i,g,j){var h=a.extend({model:i},j);var f=new g(h);return f},removeItemView:function(g){var f=this.children.findByModel(g);this.removeChildView(f);this.checkEmpty()},removeChildView:function(f){if(f){this.stopListening(f);if(f.close){f.close()}this.children.remove(f)}this.triggerMethod("item:removed",f)},checkEmpty:function(){if(!this.collection||this.collection.length===0){this.showEmptyView()}},appendHtml:function(f,h,g){f.$el.append(h.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer()},close:function(){if(this.isClosed){return}this.triggerMethod("collection:before:close");this.closeChildren();this.triggerMethod("collection:closed");var f=Array.prototype.slice.apply(arguments);d.View.prototype.close.apply(this,f)},closeChildren:function(){this.children.each(function(f){this.removeChildView(f)},this);this.checkEmpty()}});d.CompositeView=d.CollectionView.extend({constructor:function(g){var f=Array.prototype.slice.apply(arguments);d.CollectionView.apply(this,f);this.itemView=this.getItemView()},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this._renderChildren,this)}},getItemView:function(h){var f=d.getOption(this,"itemView")||this.constructor;if(!f){var g=new Error("An `itemView` must be specified");g.name="NoItemViewError";throw g}return f},serializeData:function(){var f={};if(this.model){f=this.model.toJSON()}return f},render:function(){this.isClosed=false;this.resetItemViewContainer();this.triggerBeforeRender();var f=this.renderModel();this.$el.html(f);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){d.CollectionView.prototype._renderChildren.call(this);this.triggerMethod("composite:collection:rendered")},renderCollection:function(){var f=Array.prototype.slice.apply(arguments);d.CollectionView.prototype.render.apply(this,f)},renderModel:function(){var g={};g=this.serializeData();g=this.mixinTemplateHelpers(g);var f=this.getTemplate();return d.Renderer.render(f,g)},appendHtml:function(f,g){var h=this.getItemViewContainer(f);h.append(g.el)},getItemViewContainer:function(i){if("$itemViewContainer" in i){return i.$itemViewContainer}var g;if(i.itemViewContainer){var f=a.result(i,"itemViewContainer");g=i.$(f);if(g.length<=0){var h=new Error("The specified `itemViewContainer` was not found: "+i.itemViewContainer);h.name="ItemViewContainerMissingError";throw h}}else{g=i.$el}i.$itemViewContainer=g;return g},resetItemViewContainer:function(){if(this.$itemViewContainer){delete this.$itemViewContainer}}});d.Layout=d.ItemView.extend({regionType:d.Region,constructor:function(){this._firstRender=true;this.initializeRegions();var f=Array.prototype.slice.apply(arguments);d.ItemView.apply(this,f)},render:function(){if(this._firstRender){this._firstRender=false}else{this.closeRegions();this.reInitializeRegions()}var g=Array.prototype.slice.apply(arguments);var f=d.ItemView.prototype.render.apply(this,g);return f},close:function(){if(this.isClosed){return}this.closeRegions();this.destroyRegions();var f=Array.prototype.slice.apply(arguments);d.ItemView.prototype.close.apply(this,f)},initializeRegions:function(){if(!this.regionManagers){this.regionManagers={}}var f=this;var g=this.regions||{};a.each(g,function(i,h){var j=d.Region.buildRegion(i,f.regionType);j.getEl=function(k){return f.$(k)};f.regionManagers[h]=j;f[h]=j})},reInitializeRegions:function(){if(this.regionManagers&&a.size(this.regionManagers)===0){this.initializeRegions()}else{a.each(this.regionManagers,function(f){f.reset()})}},closeRegions:function(){var f=this;a.each(this.regionManagers,function(h,g){h.close()})},destroyRegions:function(){var f=this;a.each(this.regionManagers,function(h,g){delete f[g]});this.regionManagers={}}});d.AppRouter=e.Router.extend({constructor:function(h){var g=Array.prototype.slice.apply(arguments);e.Router.prototype.constructor.apply(this,g);this.options=h;if(this.appRoutes){var f=d.getOption(this,"controller");this.processAppRoutes(f,this.appRoutes)}},processAppRoutes:function(k,l){var f,n;var o,m,j;var p=[];var q=this;for(o in l){if(l.hasOwnProperty(o)){p.unshift([o,l[o]])}}m=p.length;for(j=0;j<m;j++){o=p[j][0];n=p[j][1];f=k[n];if(!f){var g="Method '"+n+"' was not found on the controller";var h=new Error(g);h.name="NoMethodError";throw h}f=a.bind(f,k);q.route(o,n,f)}}});d.Application=function(f){this.initCallbacks=new d.Callbacks();this.vent=new e.Wreqr.EventAggregator();this.commands=new e.Wreqr.Commands();this.reqres=new e.Wreqr.RequestResponse();this.submodules={};a.extend(this,f);this.triggerMethod=d.triggerMethod};a.extend(d.Application.prototype,e.Events,{execute:function(){var f=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,f)},request:function(){var f=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,f)},addInitializer:function(f){this.initCallbacks.add(f)},start:function(f){this.triggerMethod("initialize:before",f);this.initCallbacks.run(f,this);this.triggerMethod("initialize:after",f);this.triggerMethod("start",f)},addRegions:function(g){var f=this;a.each(g,function(i,h){var j=d.Region.buildRegion(i,d.Region);f[h]=j})},removeRegion:function(f){this[f].close();delete this[f]},module:function(f,h){var g=c.call(arguments);g.unshift(this);return d.Module.create.apply(d.Module,g)}});d.Application.extend=d.extend;d.Module=function(f,g){this.moduleName=f;this.submodules={};this._setupInitializersAndFinalizers();this.app=g;this.startWithParent=true;this.triggerMethod=d.triggerMethod};a.extend(d.Module.prototype,e.Events,{addInitializer:function(f){this._initializerCallbacks.add(f)},addFinalizer:function(f){this._finalizerCallbacks.add(f)},start:function(f){if(this._isInitialized){return}a.each(this.submodules,function(g){var h=true;h=g.startWithParent;if(h){g.start(f)}});this.triggerMethod("before:start",f);this._initializerCallbacks.run(f,this);this._isInitialized=true;this.triggerMethod("start",f)},stop:function(){if(!this._isInitialized){return}this._isInitialized=false;d.triggerMethod.call(this,"before:stop");a.each(this.submodules,function(f){f.stop()});this._finalizerCallbacks.run(undefined,this);this._initializerCallbacks.reset();this._finalizerCallbacks.reset();d.triggerMethod.call(this,"stop")},addDefinition:function(f,g){this._runModuleDefinition(f,g)},_runModuleDefinition:function(g,h){if(!g){return}var f=a.flatten([this,this.app,e,d,b,a,h]);g.apply(this,f)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks();this._finalizerCallbacks=new d.Callbacks()}});a.extend(d.Module,{create:function(m,f,g){var k=this;var h=m;var j=c.apply(arguments);j.splice(0,3);f=f.split(".");var i=f.length;var l=[];l[i-1]=g;a.each(f,function(n,o){var p=h;h=k._getModule(p,n,m);k._addModuleDefinition(p,h,l[o],j)});return h},_getModule:function(j,g,k,i,f){var h=j[g];if(!h){h=new d.Module(g,k);j[g]=h;j.submodules[g]=h}return h},_addModuleDefinition:function(l,h,k,f){var j;var i;if(a.isFunction(k)){j=k;i=true}else{if(a.isObject(k)){j=k.define;i=k.startWithParent}else{i=true}}if(j){h.addDefinition(j,f)}var g=h.startWithParent;h.startWithParent=h.startWithParent&&i;if(h.startWithParent&&!h.startWithParentIsConfigured){h.startWithParentIsConfigured=true;l.addInitializer(function(m){if(h.startWithParent){h.start(m)}})}}});return d})(Backbone,_,$||window.jQuery||window.Zepto||window.ender);(function(a){a.fn.extend({searchBox:function(b){var c={activeClass:"active",inFocusClass:"infocus",disabledButtonClass:"disabled",explicitDefaultValue:"Search...",disableBlankSearch:true,searchInputSelector:false,searchResetSelector:false,searchSubmitSelector:false,destroy:b==="die"};b=a.extend(c,b);return this.each(function(){var i=a(this),l=b.searchInputSelector?a(b.searchInputSelector):i.children("[type=text]"),j=b.searchResetSelector?a(b.searchResetSelector):i.children("[type=reset]"),d=b.searchSubmitSelector?a(b.searchSubmitSelector):i.children("[type=submit]"),e=b.explicitDefaultValue||l.val(),f=j.length,g=d.length&&b.disableBlankSearch,m=false,h=false,k={init:function(){if(l.val()===e){k.disableSearchButtons()}else{if(!l.val().length){k.disableSearchButtons();k.populateSearchInput()}else{k.enableSearchButtons();k.activate()}}k.setUp()},setUp:function(){l.bind("focus.searchBox blur.searchBox keyup.searchBox paste.searchBox",function(n){if(n.type==="paste"){setTimeout(function(){k.checkStatus(n.type)},0)}else{k.checkStatus(n.type)}});j.bind("click.searchBox",function(n){k.clearSearchInput(true,true);n.preventDefault()})},checkStatus:function(n){if(l.val()===e&&!m&&n!=="blur"){k.clearSearchInput()}else{if(!l.val().length){k.disableSearchButtons();if(n!=="keyup"){k.populateSearchInput()}}else{if(l.val()!==e){k.enableSearchButtons();k.activate()}}}if(n==="focus"){k.pullFocus()}if(n==="blur"){k.blurFocus()}},activate:function(){i.addClass(b.activeClass);m=true},deactivate:function(){i.removeClass(b.activeClass);m=false},pullFocus:function(){i.addClass(b.inFocusClass)},blurFocus:function(){i.removeClass(b.inFocusClass)},clearSearchInput:function(n,o){if(n){l.focus()}setTimeout(function(){l.val("");if(o){l.trigger("keyup")}},0);k.disableSearchButtons()},populateSearchInput:function(){l.val(e);k.deactivate()},enableSearchButtons:function(){if(g){d.removeAttr("disabled").removeClass(b.disabledButtonClass)}if(f){j.show()}},disableSearchButtons:function(){if(g){d.attr("disabled","true").addClass(b.disabledButtonClass)}if(f){j.hide()}},tearDown:function(){l.unbind(".searchBox");j.unbind(".searchBox");k.enableSearchButtons();k.deactivate()}};b.destroy?k.tearDown():k.init()})}})})(jQuery);
/*! jQuery UI - v1.10.2 - 2013-04-05
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(b,f){var a=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:(function(g){return function(h,i){return typeof h==="number"?this.each(function(){var j=this;setTimeout(function(){b(j).focus();if(i){i.call(j)}},h)}):g.apply(this,arguments)}})(b.fn.focus),scrollParent:function(){var g;if((b.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.css(this,"position"))&&(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?b(document):g},zIndex:function(j){if(j!==f){return this.css("zIndex",j)}if(this.length){var h=b(this[0]),g,i;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){i=parseInt(h.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})},removeUniqueId:function(){return this.each(function(){if(e.test(this.id)){b(this).removeAttr("id")}})}});function d(i,g){var k,j,h,l=i.nodeName.toLowerCase();if("area"===l){k=i.parentNode;j=k.name;if(!i.href||!j||k.nodeName.toLowerCase()!=="map"){return false}h=b("img[usemap=#"+j+"]")[0];return !!h&&c(h)}return(/input|select|textarea|button|object/.test(l)?!i.disabled:"a"===l?i.href||g:g)&&c(i)}function c(g){return b.expr.filters.visible(g)&&!b(g).parents().addBack().filter(function(){return b.css(this,"visibility")==="hidden"}).length}b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(g){return function(h){return !!b.data(h,g)}}):function(j,h,g){return !!b.data(j,g[3])},focusable:function(g){return d(g,!isNaN(b.attr(g,"tabindex")))},tabbable:function(i){var g=b.attr(i,"tabindex"),h=isNaN(g);return(h||g>=0)&&d(i,!h)}});if(!b("<a>").outerWidth(1).jquery){b.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function l(o,n,i,p){b.each(h,function(){n-=parseFloat(b.css(o,"padding"+this))||0;if(i){n-=parseFloat(b.css(o,"border"+this+"Width"))||0}if(p){n-=parseFloat(b.css(o,"margin"+this))||0}});return n}b.fn["inner"+g]=function(i){if(i===f){return m["inner"+g].call(this)}return this.each(function(){b(this).css(k,l(this,i)+"px")})};b.fn["outer"+g]=function(i,n){if(typeof i!=="number"){return m["outer"+g].call(this,i)}return this.each(function(){b(this).css(k,l(this,i,true,n)+"px")})}})}if(!b.fn.addBack){b.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(b("<a>").data("a-b","a").removeData("a-b").data("a-b")){b.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,b.camelCase(h))}else{return g.call(this)}}})(b.fn.removeData)}b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart" in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(h,j,l){var g,k=b.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var k,l=g.plugins[j];if(!l||!g.element[0].parentNode||g.element[0].parentNode.nodeType===11){return}for(k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},hasScroll:function(j,h){if(b(j).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",i=false;if(j[g]>0){return true}j[g]=1;i=(j[g]>0);j[g]=0;return i}})})(jQuery);(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(f,g,n){var k,l,i,m,h={},j=f.split(".")[0];f=f.split(".")[1];k=j+"-"+f;if(!n){n=g;g=b.Widget}b.expr[":"][k.toLowerCase()]=function(o){return !!b.data(o,k)};b[j]=b[j]||{};l=b[j][f];i=b[j][f]=function(o,p){if(!this._createWidget){return new i(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(i,l,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});m=new g();m.options=b.widget.extend({},m.options);b.each(n,function(p,o){if(!b.isFunction(o)){h[p]=o;return}h[p]=(function(){var q=function(){return g.prototype[p].apply(this,arguments)},r=function(s){return g.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()});i.prototype=b.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix:f},h,{constructor:i,namespace:j,widgetName:f,widgetFullName:k});if(l){b.each(l._childConstructors,function(p,q){var o=q.prototype;b.widget(o.namespace+"."+o.widgetName,i,q._proto)});delete l._childConstructors}else{g._childConstructors.push(i)}b.widget.bridge(f,i)};b.widget.extend=function(k){var g=d.call(arguments,1),j=0,f=g.length,h,i;for(;j<f;j++){for(h in g[j]){i=g[j][h];if(g[j].hasOwnProperty(h)&&i!==e){if(b.isPlainObject(i)){k[h]=b.isPlainObject(k[h])?b.widget.extend({},k[h],i):b.widget.extend({},i)}else{k[h]=i}}}}return k};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(k){var i=typeof k==="string",j=d.call(arguments,1),l=this;k=!i&&j.length?b.widget.extend.apply(null,[k].concat(j)):k;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+k+"'")}if(!b.isFunction(m[k])||k.charAt(0)==="_"){return b.error("no such method '"+k+"' for "+g+" widget instance")}n=m[k].apply(m,j);if(n!==m&&n!==e){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(k||{})._init()}else{b.data(this,h,new f(k,this))}})}return l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){f={};l=j.split(".");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(i,h,g){var j,f=this;if(typeof i!=="boolean"){g=h;h=i;i=false}if(!g){g=h;h=this.element;j=this.widget()}else{h=j=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(p,o){function m(){if(!i&&(f.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?f[o]:o).apply(f,arguments)}if(typeof o!=="string"){m.guid=o.guid=o.guid||m.guid||b.guid++}var n=p.match(/^(\w+)\s*(.*)$/),l=n[1]+f.eventNamespace,k=n[2];if(k){j.delegate(k,l,m)}else{h.bind(l,m)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,h){function g(){return(typeof i==="string"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(j,i,l){if(typeof i==="string"){i={effect:i}}var k,h=!i?g:i===true||typeof i==="number"?f:i.effect||f;i=i||{};if(typeof i==="number"){i={duration:i}}k=!b.isEmptyObject(i);i.complete=l;if(i.delay){j.delay(i.delay)}if(k&&b.effects&&b.effects.effect[h]){j[g](i)}else{if(h!==g&&j[h]){j[h](i.duration,i.easing,l)}else{j.queue(function(m){b(this)[g]();if(l){l.call(j[0])}m()})}}}})})(jQuery);(function(b,c){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===b.data(e.target,d.widgetName+".preventClickEvent")){b.removeData(e.target,d.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which===1),d=(typeof this.options.cancel==="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.widgetName+".preventClickEvent")){b.removeData(f.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){b.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(e,c){e.ui=e.ui||{};var j,k=Math.max,o=Math.abs,m=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function n(r,q,p){return[parseFloat(r[0])*(b.test(r[0])?q/100:1),parseFloat(r[1])*(b.test(r[1])?p/100:1)]}function i(p,q){return parseInt(e.css(p,q),10)||0}function f(q){var p=q[0];if(p.nodeType===9){return{width:q.width(),height:q.height(),offset:{top:0,left:0}}}if(e.isWindow(p)){return{width:q.width(),height:q.height(),offset:{top:q.scrollTop(),left:q.scrollLeft()}}}if(p.preventDefault){return{width:0,height:0,offset:{top:p.pageY,left:p.pageX}}}return{width:q.outerWidth(),height:q.outerHeight(),offset:q.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var q,p,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];e("body").append(s);q=r.offsetWidth;s.css("overflow","scroll");p=r.offsetWidth;if(q===p){p=s[0].clientWidth}s.remove();return(j=q-p)},getScrollInfo:function(t){var s=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),q=s==="scroll"||(s==="auto"&&t.width<t.element[0].scrollWidth),p=r==="scroll"||(r==="auto"&&t.height<t.element[0].scrollHeight);return{width:p?e.position.scrollbarWidth():0,height:q?e.position.scrollbarWidth():0}},getWithinInfo:function(q){var r=e(q||window),p=e.isWindow(r[0]);return{element:r,isWindow:p,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:p?r.width():r.outerWidth(),height:p?r.height():r.outerHeight()}}};e.fn.position=function(z){if(!z||!z.of){return g.apply(this,arguments)}z=e.extend({},z);var A,w,u,y,t,p,v=e(z.of),s=e.position.getWithinInfo(z.within),q=e.position.getScrollInfo(s),x=(z.collision||"flip").split(" "),r={};p=f(v);if(v[0].preventDefault){z.at="left top"}w=p.width;u=p.height;y=p.offset;t=e.extend({},y);e.each(["my","at"],function(){var D=(z[this]||"").split(" "),C,B;if(D.length===1){D=d.test(D[0])?D.concat(["center"]):h.test(D[0])?["center"].concat(D):["center","center"]}D[0]=d.test(D[0])?D[0]:"center";D[1]=h.test(D[1])?D[1]:"center";C=a.exec(D[0]);B=a.exec(D[1]);r[this]=[C?C[0]:0,B?B[0]:0];z[this]=[l.exec(D[0])[0],l.exec(D[1])[0]]});if(x.length===1){x[1]=x[0]}if(z.at[0]==="right"){t.left+=w}else{if(z.at[0]==="center"){t.left+=w/2}}if(z.at[1]==="bottom"){t.top+=u}else{if(z.at[1]==="center"){t.top+=u/2}}A=n(r.at,w,u);t.left+=A[0];t.top+=A[1];return this.each(function(){var C,L,E=e(this),G=E.outerWidth(),D=E.outerHeight(),F=i(this,"marginLeft"),B=i(this,"marginTop"),K=G+F+i(this,"marginRight")+q.width,J=D+B+i(this,"marginBottom")+q.height,H=e.extend({},t),I=n(r.my,E.outerWidth(),E.outerHeight());if(z.my[0]==="right"){H.left-=G}else{if(z.my[0]==="center"){H.left-=G/2}}if(z.my[1]==="bottom"){H.top-=D}else{if(z.my[1]==="center"){H.top-=D/2}}H.left+=I[0];H.top+=I[1];if(!e.support.offsetFractions){H.left=m(H.left);H.top=m(H.top)}C={marginLeft:F,marginTop:B};e.each(["left","top"],function(N,M){if(e.ui.position[x[N]]){e.ui.position[x[N]][M](H,{targetWidth:w,targetHeight:u,elemWidth:G,elemHeight:D,collisionPosition:C,collisionWidth:K,collisionHeight:J,offset:[A[0]+I[0],A[1]+I[1]],my:z.my,at:z.at,within:s,elem:E})}});if(z.using){L=function(P){var R=y.left-H.left,O=R+w-G,Q=y.top-H.top,N=Q+u-D,M={target:{element:v,left:y.left,top:y.top,width:w,height:u},element:{element:E,left:H.left,top:H.top,width:G,height:D},horizontal:O<0?"left":R>0?"right":"center",vertical:N<0?"top":Q>0?"bottom":"middle"};if(w<G&&o(R+O)<w){M.horizontal="center"}if(u<D&&o(Q+N)<u){M.vertical="middle"}if(k(o(R),o(O))>k(o(Q),o(N))){M.important="horizontal"}else{M.important="vertical"}z.using.call(this,P,M)}}E.offset(e.extend(H,{using:L}))})};e.ui.position={fit:{left:function(t,s){var r=s.within,v=r.isWindow?r.scrollLeft:r.offset.left,x=r.width,u=t.left-s.collisionPosition.marginLeft,w=v-u,q=u+s.collisionWidth-x-v,p;if(s.collisionWidth>x){if(w>0&&q<=0){p=t.left+w+s.collisionWidth-x-v;t.left+=w-p}else{if(q>0&&w<=0){t.left=v}else{if(w>q){t.left=v+x-s.collisionWidth}else{t.left=v}}}}else{if(w>0){t.left+=w}else{if(q>0){t.left-=q}else{t.left=k(t.left-u,t.left)}}}},top:function(s,r){var q=r.within,w=q.isWindow?q.scrollTop:q.offset.top,x=r.within.height,u=s.top-r.collisionPosition.marginTop,v=w-u,t=u+r.collisionHeight-x-w,p;if(r.collisionHeight>x){if(v>0&&t<=0){p=s.top+v+r.collisionHeight-x-w;s.top+=v-p}else{if(t>0&&v<=0){s.top=w}else{if(v>t){s.top=w+x-r.collisionHeight}else{s.top=w}}}}else{if(v>0){s.top+=v}else{if(t>0){s.top-=t}else{s.top=k(s.top-u,s.top)}}}}},flip:{left:function(v,u){var t=u.within,z=t.offset.left+t.scrollLeft,C=t.width,r=t.isWindow?t.scrollLeft:t.offset.left,w=v.left-u.collisionPosition.marginLeft,A=w-r,q=w+u.collisionWidth-C-r,y=u.my[0]==="left"?-u.elemWidth:u.my[0]==="right"?u.elemWidth:0,B=u.at[0]==="left"?u.targetWidth:u.at[0]==="right"?-u.targetWidth:0,s=-2*u.offset[0],p,x;if(A<0){p=v.left+y+B+s+u.collisionWidth-C-z;if(p<0||p<o(A)){v.left+=y+B+s}}else{if(q>0){x=v.left-u.collisionPosition.marginLeft+y+B+s-r;if(x>0||o(x)<q){v.left+=y+B+s}}}},top:function(u,t){var s=t.within,B=s.offset.top+s.scrollTop,C=s.height,p=s.isWindow?s.scrollTop:s.offset.top,w=u.top-t.collisionPosition.marginTop,y=w-p,v=w+t.collisionHeight-C-p,z=t.my[1]==="top",x=z?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,D=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,r=-2*t.offset[1],A,q;if(y<0){q=u.top+x+D+r+t.collisionHeight-C-B;if((u.top+x+D+r)>y&&(q<0||q<o(y))){u.top+=x+D+r}}else{if(v>0){A=u.top-t.collisionPosition.marginTop+x+D+r-p;if((u.top+x+D+r)>v&&(A>0||o(A)<v)){u.top+=x+D+r}}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var t,v,q,s,r,p=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(p?"div":"body");q={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(p){e.extend(q,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in q){t.style[r]=q[r]}t.appendChild(u);v=p||document.documentElement;v.insertBefore(t,v.firstChild);u.style.cssText="position: absolute; left: 10.7432222px;";s=e(u).offset().left;e.support.offsetFractions=s>10&&s<11;t.innerHTML="";v.removeChild(t)})()}(jQuery));
/*! jQRangeSlider 5.1 - 2013-03-24 - Copyright (C) Guillaume Gautreau 2012 - MIT and GPLv3 licenses.*/
(function(a){a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(c){return b._touchStart(c)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),a.ui.mouse.prototype._mouseDestroy.apply(this)},_touchStart:function(b){b.which=1,b.preventDefault(),this._fillTouchEvent(b);var d=this,c=this._mouseDownEvent;this._mouseDown(b),c!==this._mouseDownEvent&&(this._touchEndDelegate=function(e){d._touchEnd(e)},this._touchMoveDelegate=function(e){d._touchMove(e)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_touchEnd:function(b){this._fillTouchEvent(b),this._mouseUp(b),a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,a(document).trigger("mouseup")},_touchMove:function(b){return b.preventDefault(),this._fillTouchEvent(b),this._mouseMove(b)},_fillTouchEvent:function(c){var b;b=c.targetTouches===undefined&&c.changedTouches===undefined?c.originalEvent.targetTouches[0]||c.originalEvent.changedTouches[0]:c.targetTouches[0]||c.changedTouches[0],c.pageX=b.pageX,c.pageY=b.pageY}})})(jQuery),function(a){a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){setTimeout(a.proxy(this._initElement,this),10)},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(b,c){"containment"===b&&(this.options.containment=null===c||0===a(c).length?null:a(c))},_mouseStart:function(b){return this._cache(),this.cache.click={left:b.pageX,top:b.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(c){var b=c.pageX-this.cache.click.left;return b=this._constraintPosition(b+this.cache.initialOffset.left),this._applyPosition(b),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(b){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(b=Math.min(b,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),b=Math.max(b,this.cache.parent.offset.left)),b},_applyPosition:function(c){var b={top:this.cache.offset.top,left:c};this.element.offset({left:c}),this.cache.offset=b},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var b=this.element.parent();this.cache.parent={offset:b.offset(),width:b.width()}}else{this.cache.parent=null}},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(c,b){return parseInt(c.css(b),10)||0},_triggerMouseEvent:function(c){var b=this._prepareEventData();this.element.trigger(c,b)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(a){a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max},this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(a.proxy(this.resize,this),1),setTimeout(a.proxy(this._initValues,this),1)},_bindResize:function(){var b=this;this._resizeProxy=function(c){b.resize(c)},a(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(c,b){this._setWheelOption(c,b),this._setArrowsOption(c,b),this._setLabelsOption(c,b),this._setLabelsDurations(c,b),this._setFormatterOption(c,b),this._setBoundsOption(c,b),this._setRangeOption(c,b),this._setStepOption(c,b),this._setScalesOption(c,b)},_validProperty:function(c,b,d){return null===c||c[b]===undefined?d:c[b]},_setStepOption:function(c,b){"step"===c&&(this.options.step=b,this._leftHandle("option","step",b),this._rightHandle("option","step",b),this._changed(!0))},_setScalesOption:function(c,b){"scales"===c&&(b===!1||null===b?(this.options.scales=!1,this._destroyRuler()):b instanceof Array&&(this.options.scales=b,this._updateRuler()))},_setRangeOption:function(c,b){"range"===c&&(this._bar("option","range",b),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(c,b){"bounds"===c&&b.min!==undefined&&b.max!==undefined&&this.bounds(b.min,b.max)},_setWheelOption:function(c,b){("wheelMode"===c||"wheelSpeed"===c)&&(this._bar("option",c,b),this.options[c]=this._bar("option",c))},_setLabelsOption:function(c,b){if("valueLabels"===c){if("hide"!==b&&"show"!==b&&"change"!==b){return}this.options.valueLabels=b,"hide"!==b?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(c,b){"formatter"===c&&null!==b&&"function"==typeof b&&(this.options.formatter=b,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(c,b){"arrows"!==c||b!==!0&&b!==!1||b===this.options.arrows||(b===!0?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):b===!1&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(c,b){if("durationIn"===c||"durationOut"===c||"delayOut"===c){if(parseInt(b,10)!==b){return}null!==this.labels.left&&this._leftLabel("option",c,b),null!==this.labels.right&&this._rightLabel("option",c,b),this.options[c]=b}},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler()},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("sliderDrag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(b){var d,c=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+b+"Arrow").css("position","absolute").css(b,0).appendTo(this.element);return d="right"===b?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this),c.bind("mousedown touchstart",d),c},_proxy:function(c,b,f){var d=Array.prototype.slice.call(f);return c[b].apply(c,d)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(c,b){return b===this.rightHandle&&(c-=b.outerWidth()),c*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-b.outerWidth(!0))+this.options.bounds.min},_trigger:function(c){var b=this;setTimeout(function(){b.element.trigger(c,{label:b.element,values:b.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_changed:function(b){(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),b!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1)},_updateValues:function(){var c=this._leftHandle("value"),b=this._rightHandle("value"),f=this._min(c,b),d=this._max(c,b),g=f!==this._values.min||d!==this._values.max;return this._values.min=this._min(c,b),this._values.max=this._max(c,b),g},_min:function(c,b){return Math.min(c,b)},_max:function(c,b){return Math.max(c,b)},_createLabel:function(b,d){var c;return null===b?(c=this._getLabelConstructorParameters(b,d),b=a("<div />").appendTo(this.element)[this._labelType()](c)):(c=this._getLabelRefreshParameters(b,d),b[this._labelType()](c)),b},_getLabelConstructorParameters:function(c,b){return{handle:b,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return this.options.formatter===!1||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(b){return Math.round(b)},_destroyLabel:function(b){return null!==b&&(b.remove(),b=null),b},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(b){b.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollRight",4*this._stepRatio(),1)},_continueScrolling:function(d,c,g,f){this._bar(d,g),f=f||5,f--;var j=this,h=16,b=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===f&&(c>h?c=Math.max(h,c/1.5):g=Math.min(b,2*g),f=5),j._continueScrolling(d,c,g,f)},c)},_scrollLeftClick:function(b){b.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),this._continueScrolling("scrollLeft",4*this._stepRatio(),1)},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(c){c.preventDefault(),b._stopScroll()},a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle),this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=a("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_destroyRuler:function(){null!==this.ruler&&a.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),this.options.scales!==!1&&a.fn.ruler&&(null===this.ruler&&this._createRuler(),this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales}))},values:function(c,b){var d=this._bar("values",c,b);return c!==undefined&&b!==undefined&&this._changed(!0),d},min:function(b){return this._values.min=this.values(b,this._values.max).min,this._values.min},max:function(b){return this._values.max=this.values(this._values.min,b).max,this._values.max},bounds:function(c,b){return this._isValidValue(c)&&this._isValidValue(b)&&b>c&&(this._setBounds(c,b),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(b){return b!==undefined&&parseFloat(b)===b},_setBounds:function(c,b){this.options.bounds={min:c,max:b},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(b){this._bar("zoomIn",b)},zoomOut:function(b){this._bar("zoomOut",b)},scrollLeft:function(b){this._bar("startScroll"),this._bar("scrollLeft",b),this._bar("stopScroll")},scrollRight:function(b){this._bar("startScroll"),this._bar("scrollRight",b),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows").removeClass("ui-rangeSlider-noArrow"),this.bar.detach(),this.leftHandle.detach(),this.rightHandle.detach(),this.innerBar.detach(),this.container.detach(),this.arrows.left.detach(),this.arrows.right.detach(),this.element.removeClass("ui-rangeSlider"),this._destroyLabels(),delete this.options,a(window).unbind("resize",this._resizeProxy),a.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery),function(a){a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},_setOption:function(b,c){"isLeft"!==b||c!==!0&&c!==!1||c===this.options.isLeft?"step"===b&&this._checkStep(c)?(this.options.step=c,this.update()):"bounds"===b?(this.options.bounds=c,this.update()):"range"===b&&this._checkRange(c)&&(this.options.range=c,this.update()):(this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),a.ui.rangeSliderDraggable.prototype._setOption.apply(this,[b,c])},_checkRange:function(b){return b===!1||!this._isValidValue(b.min)&&!this._isValidValue(b.max)},_isValidValue:function(b){return b!==undefined&&b!==!1&&parseFloat(b)!==b},_checkStep:function(b){return b===!1||parseFloat(b)===b},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(a.proxy(this._initElement,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var b=this.element.parent();this.cache.parent={element:b,offset:b.offset(),padding:{left:this._parsePixels(b,"paddingLeft")},width:b.width()}},_position:function(c){var b=this._getPositionForValue(c);this._applyPosition(b)},_constraintPosition:function(c){var b=this._getValueForPosition(c);return this._getPositionForValue(b)},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]),this._left=b,this._setValue(this._getValueForPosition(b)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return b.value=this._value,b},_setValue:function(b){b!==this._value&&(this._value=b)},_constraintValue:function(c){if(c=Math.min(c,this._bounds().max),c=Math.max(c,this._bounds().min),c=this._round(c),this.options.range!==!1){var b=this.options.range.min||!1,d=this.options.range.max||!1;b!==!1&&(c=Math.max(c,this._round(b))),d!==!1&&(c=Math.min(c,this._round(d))),c=Math.min(c,this._bounds().max),c=Math.max(c,this._bounds().min)}return c},_round:function(b){return this.options.step!==!1&&this.options.step>0?Math.round(b/this.options.step)*this.options.step:b},_getPositionForValue:function(c){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset){return 0}c=this._constraintValue(c);var b=(c-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),f=this.cache.parent.width-this.cache.width.outer,d=this.cache.parent.offset.left;return b*f+d},_getValueForPosition:function(c){var b=this._getRawValueForPositionAndBounds(c,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(b)},_getRawValueForPositionAndBounds:function(c,b,f){var d=null===this.cache.parent.offset?0:this.cache.parent.offset.left,h=this.cache.parent.width-this.cache.width.outer,g=(c-d)/h;return g*(f-b)+b},value:function(b){return b!==undefined&&(this._cache(),b=this._constraintValue(b),this._position(b)),this._value},update:function(){this._cache();var c=this._constraintValue(this._value),b=this._getPositionForValue(c);c!==this._value?(this._triggerMouseEvent("updating"),this._position(c),this._triggerMouseEvent("update")):b!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(c),this._triggerMouseEvent("update"))},position:function(b){return b!==undefined&&(this._cache(),b=this._constraintPosition(b),this._applyPosition(b)),this._left},add:function(c,b){return c+b},substract:function(c,b){return c-b},stepsBetween:function(c,b){return this.options.step===!1?b-c:(b-c)/this.options.step},multiplyStep:function(c,b){return c*b},moveRight:function(c){var b;return this.options.step===!1?(b=this._left,this.position(this._left+c),this._left-b):(b=this._value,this.value(this.add(b,this.multiplyStep(this.options.step,c))),this.stepsBetween(b,this._value))},moveLeft:function(b){return -this.moveRight(-b)},stepRatio:function(){if(this.options.step===!1){return 1}var b=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/b}})}(jQuery),function(a){a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},_setOption:function(c,b){"range"===c?this._setRangeOption(b):"wheelSpeed"===c?this._setWheelSpeedOption(b):"wheelMode"===c&&this._setWheelModeOption(b)},_setRangeOption:function(c){if(("object"!=typeof c||null===c)&&(c=!1),c!==!1||this.options.range!==!1){if(c!==!1){var b=c.min===undefined?this.options.range.min||!1:c.min,d=c.max===undefined?this.options.range.max||!1:c.max;this.options.range={min:b,max:d}}else{this.options.range=!1}this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(b){"number"==typeof b&&b>0&&(this.options.wheelSpeed=b)},_setWheelModeOption:function(b){(null===b||b===!1||"zoom"===b||"scroll"===b)&&(this.options.wheelMode!==b&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(b),this.options.wheelMode=b)},_bindMouseWheel:function(b){"zoom"===b?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):"scroll"===b&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range===!1){return !1}var c=this._values.max,b={min:!1,max:!1};b.max=(this.options.range.min||!1)!==!1?this._leftHandle("substract",c,this.options.range.min):!1,b.min=(this.options.range.max||!1)!==!1?this._leftHandle("substract",c,this.options.range.max):!1,this._leftHandle("option","range",b)},_setRightRange:function(){var c=this._values.min,b={min:!1,max:!1};b.min=(this.options.range.min||!1)!==!1?this._rightHandle("add",c,this.options.range.min):!1,b.max=(this.options.range.max||!1)!==!1?this._rightHandle("add",c,this.options.range.max):!1,this._rightHandle("option","range",b)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var c=this._leftHandle("position"),b=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:c}),this.element.css("width",b-c)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(c,b){var d=Array.prototype.slice.call(b);return c[this.options.type].apply(c,d)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]),this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[b]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(c,b){return this._cacheIfNecessary(),this._switchedValues()?(this._switchHandles(),this._onDragRightHandle(c,b),undefined):(this._values.min=b.value,this.cache.offset.left=b.offset.left,this.cache.leftHandle.offset=b.offset,this._positionBar(),undefined)},_onDragRightHandle:function(c,b){return this._cacheIfNecessary(),this._switchedValues()?(this._switchHandles(),this._onDragLeftHandle(c,b),undefined):(this._values.max=b.value,this.cache.rightHandle.offset=b.offset,this._positionBar(),undefined)},_positionBar:function(){var b=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=b,this.element.css("width",b).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var b=this._values.min;return this._values.min=this._values.max,this._values.max=b,!0}return !1},_switchHandles:function(){var b=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=b,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(b){var d,c={};return c.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[b]),c.left=this._leftHandle("position",c.left),d=this._rightHandle("position",c.left+this.cache.width.outer-this.cache.rightHandle.width),c.width=d-c.left+this.cache.rightHandle.width,c},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b.left]),this.element.width(b.width)},_mouseWheelZoom:function(c,g,f,k){var j=this._values.min+(this._values.max-this._values.min)/2,b={},d={};return this.options.range===!1||this.options.range.min===!1?(b.max=j,d.min=j):(b.max=j-this.options.range.min/2,d.min=j+this.options.range.min/2),this.options.range!==!1&&this.options.range.max!==!1&&(b.min=j-this.options.range.max/2,d.max=j+this.options.range.max/2),this._leftHandle("option","range",b),this._rightHandle("option","range",d),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.zoomOut(k*this.options.wheelSpeed),!1},_mouseWheelScroll:function(b,d,c,f){return this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.scrollLeft(f*this.options.wheelSpeed),!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(b){return this._leftHandle("value",b)},max:function(b){return this._rightHandle("value",b)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(b){return b=b||1,0>b?this.scrollRight(-b):(b=this._leftHandle("moveLeft",b),this._rightHandle("moveLeft",b),this.update(),this._triggerMouseEvent("scroll"),undefined)},scrollRight:function(b){return b=b||1,0>b?this.scrollLeft(-b):(b=this._rightHandle("moveRight",b),this._leftHandle("moveRight",b),this.update(),this._triggerMouseEvent("scroll"),undefined)},zoomIn:function(c){if(c=c||1,0>c){return this.zoomOut(-c)}var b=this._rightHandle("moveLeft",c);c>b&&(b/=2,this._rightHandle("moveRight",b)),this._leftHandle("moveRight",b),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(c){if(c=c||1,0>c){return this.zoomIn(-c)}var b=this._rightHandle("moveRight",c);c>b&&(b/=2,this._rightHandle("moveLeft",b)),this._leftHandle("moveLeft",b),this.update(),this._triggerMouseEvent("zoom")},values:function(c,b){if(c!==undefined&&b!==undefined){var f=Math.min(c,b),d=Math.max(c,b);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",f),this._values.max=this._rightHandle("value",d),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(b){function a(c,f,d,g){this.label1=c,this.label2=f,this.type=d,this.options=g,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=c,this.right=f,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(b.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(b.proxy(this.AfterInit,this),1000)},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(h,e){this.CacheWidth(h,e),this.CacheHeight(h,e),e.offset=h.offset(),e.margin={left:this.ParsePixels("marginLeft",h),right:this.ParsePixels("marginRight",h)},e.border={left:this.ParsePixels("borderLeftWidth",h),right:this.ParsePixels("borderRightWidth",h)}},this.CacheWidth=function(h,e){e.width=h.width(),e.outerWidth=h.outerWidth()},this.CacheHeight=function(h,e){e.outerHeightMargin=h.outerHeight(!0)},this.ParsePixels=function(h,e){return parseInt(e.css(h),10)||0},this.BindHandle=function(e){e.bind("updating",b.proxy(this.onHandleUpdating,this)),e.bind("update",b.proxy(this.onHandleUpdated,this)),e.bind("moving",b.proxy(this.onHandleMoving,this)),e.bind("stop",b.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var h=this.GetRawPosition(this.cache.label1,this.cache.handle1),e=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(h,e),this.PositionLabel(this.label1,h.left,this.cache.label1),this.PositionLabel(this.label2,e.left,this.cache.label2)}},this.PositionLabel=function(k,j,m){var l,q,p,h=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;h-j>=0?(k.css("right",""),k.offset({left:j})):(l=h+this.cache.offsetParent.width,q=j+m.margin.left+m.outerWidth+m.margin.right,p=l-q,k.css("left",""),k.css("right",p))},this.ConstraintPositions=function(h,e){h.center<e.center&&h.outerRight>e.outerLeft?(h=this.getLeftPosition(h,e),e=this.getRightPosition(h,e)):h.center>e.center&&e.outerRight>h.outerLeft&&(e=this.getLeftPosition(e,h),h=this.getRightPosition(e,h))},this.getLeftPosition=function(j,h){var l=(h.center+j.center)/2,k=l-j.cache.outerWidth-j.cache.margin.right+j.cache.border.left;return j.left=k,j},this.getRightPosition=function(j,h){var k=(h.center+j.center)/2;return h.left=k+h.cache.margin.left+h.cache.border.left,h},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){this.moving===!0&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(h,e){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(e),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.UpdateHandlePosition=function(e){null!==this.cache&&(e.element[0]===this.handle1[0]?this.UpdatePosition(e,this.cache.handle1):this.UpdatePosition(e,this.cache.handle2))},this.UpdatePosition=function(h,e){e.offset=h.offset},this.GetRawPosition=function(k,j){var m=j.offset.left+j.outerWidth/2,l=m-k.outerWidth/2,q=l+k.outerWidth-k.border.left-k.border.right,p=l-k.margin.left-k.border.left,h=j.offset.top-k.outerHeightMargin;return{left:l,outerLeft:p,top:h,right:q,outerRight:p+k.outerWidth+k.margin.left+k.margin.right,cache:k,center:m}},this.Init()}b.widget("ui.rangeSliderLabel",b.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving",b.proxy(this._onMoving,this)).bind("update",b.proxy(this._onUpdate,this)).bind("switch",b.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},_createElements:function(){this._valueContainer=b("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=b("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var c=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,c)},_setOption:function(d,c){"show"===d?this._updateShowOption(c):("durationIn"===d||"durationOut"===d||"delayOut"===d)&&this._updateDurations(d,c)},_updateShowOption:function(c){this.options.show=c,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(d,c){parseInt(c,10)===c&&(this._positionner.options[d]=c,this.options[d]=c)},_display:function(c){this.options.formatter===!1?this._displayText(Math.round(c)):this._displayText(this.options.formatter(c))},_displayText:function(c){this._valueContainer.text(c)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(c){this.options.handle.trigger(c)},_mouseUp:function(c){this.options.handle.trigger(c)},_mouseMove:function(c){this.options.handle.trigger(c)},_onMoving:function(d,c){this._display(c.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(d,c){this.options.isLeft=c,this._toggleClass(),this._positionner.PositionLabels()},pair:function(c){null===this._positionner&&(this._positionner=new a(this.element,c,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),c[this.widgetName]("positionner",this._positionner))},positionner:function(c){return c!==undefined&&(this._positionner=c),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(b){var a={first:function(c){return c},next:function(c){return c+1},format:function(){},label:function(c){return Math.round(c)},stop:function(){return !1}};b.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(d,c){return"min"===d||"max"===d&&c!==this.options[d]?(this.options[d]=c,this._regenerate(),void 0):"scales"===d&&c instanceof Array?(this.options.scales=c,this._regenerate(),void 0):void 0},_createScales:function(){if(this.options.max!==this.options.min){for(var c=0;this.options.scales.length>c;c++){this._createScale(this.options.scales[c],c)}}},_createScale:function(d,c){var g=b.extend({},a,d),f=b("<div class='ui-ruler-scale' />").appendTo(this.element);f.addClass("ui-ruler-scale"+c),this._createTicks(f,g)},_createTicks:function(f,d){var k,j,m,l=d.first(this.options.min,this.options.max),c=this.options.max-this.options.min,g=!0;do{k=l,l=d.next(k),j=(Math.min(l,this.options.max)-Math.max(k,this.options.min))/c,m=this._createTick(k,l,d),f.append(m),m.css("width",100*j+"%"),g&&k>this.options.min&&m.css("margin-left",100*(k-this.options.min)/c+"%"),g=!1}while(!this._stop(d,l))},_stop:function(d,c){return d.stop(c)||c>=this.options.max},_createTick:function(d,g,f){var j=b("<div class='ui-ruler-tick' style='display:inline-block' />"),h=b("<div class='ui-ruler-tick-inner' />").appendTo(j),c=b("<span class='ui-ruler-tick-label' />").appendTo(h);return c.text(f.label(d,g)),f.format(j,d,g),j}})}(jQuery);