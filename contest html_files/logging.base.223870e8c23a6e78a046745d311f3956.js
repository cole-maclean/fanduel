(function(){var b,d,a,c=false;window.FD=window.FD||{};window.FD.EventLogger=b=window.FD.EventLogger||{};b.DEBUG=false;b.BACKWARDS_COMPATIBILITY=true;b.AJAX_ENDPOINT_PATH="/ajax";b.baseChannelName="FD.";b.currentChannelName=null;b.setChannelName=function(e){this.currentChannelName=e;return this};b.getFullChannelName=function(){return this.baseChannelName+this.currentChannelName};b.logImmediateEvent=function(e){d(this.getFullChannelName(),e);return this};b.logOn=function(k,i,h,j,e){var g=this.getFullChannelName(),f=[];f.push(h);if(e){f.push(e)}f.push(function(){d(g,k)});i[j?"one":"on"].apply(i,f);return this};d=function(e,f){if(b.DEBUG){console.log("Not logging event:",e,"data:",f,"in debug mode.");return}$.ajax(b.AJAX_ENDPOINT_PATH,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify([{type:"PageURL",data:document.location.href},{type:"c",serverhandler:"CCEvent",clientid:0,data:{cc_action:"cca_logevent",channelname:e,properties:f}}]),success:function(g){if(b.DEBUG){console.log("Event successfully tracked:",g)}},error:function(g,i,h){if(b.DEBUG){console.warn("Event failed to track, data:",g,"textStatus:",i,"errorThrown:",h)}}})};if(b.BACKWARDS_COMPATIBILITY){window.FD.eventlogger=b;b.bindEvent=function(e,h,f,g){return b.logOn(f,$(e),h,g)};b.bindLiveEvent=function(e,h,f,g){return b.logOn(f,$(document),h,g,e)}}a=function(g,i,f){var h,e;return function(){var m=this,l=arguments;var k=function(){h=null;if(!f){e=g.apply(m,l)}};var j=f&&!h;clearTimeout(h);h=setTimeout(k,i);if(j){e=g.apply(m,l)}return e}};b.enableAutoDataAttrEventLogging=function(){if(c){return}$(document).on("click.fdeventlogger","[data-logger-channel]",a(function(){var g=$(this),e=g.data("logger-channel"),f=g.data("logger-data")||{};if(!e||typeof e!=="string"){if(b.DEBUG){console.error("EventLogger failed to parse data-logger-channel attribute on:",g,"got",typeof e,":",e)}return}if(!$.isPlainObject(f)){if(b.DEBUG){console.warn("EventLogger failed to parse data-logger-data attribute on:",g,"got",typeof f,":",f);console.warn("Logging event without data attributes.")}f={}}b.setChannelName(e).logImmediateEvent(f)},200,true));c=true};b.enableAutoDataAttrEventLogging();b.disableAutoDataAttrEventLogging=function(){if(!c){return}$(document).off(".fdeventlogger");c=false};b.logMetric=function(f,e,h){if(typeof e==="function"){return function(){var j=new Date();var i;e.apply(this,arguments);i=new Date();b.logMetric(f,i.getTime()-j.getTime(),h)}}if(h!==0){h=h||1}if(Math.random()>h){return}var g={name:f||"",metric:e||0};b.setChannelName("ClientMetrics").logImmediateEvent(g)}}).call(this);